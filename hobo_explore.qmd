---
title: "hobo explore"
format: html
editor: visual
---

## Load Packages

```{r}

if(!require(librarian)){
  install.packages(librarian)
  library(librarian)
}

shelf(tidyverse, here, DBI, RPostgres, janitor, readxl, parsedate, lubridate)

```

# slow method for reading csv files

```{r}
#| message: false
#| warning: false

filenames <- gsub("\\.csv$","", list.files(here("raw_data")))

for(i in 1:n_distinct(filenames)){
  
  # current csv
  csv <- read_csv(here("raw_data", paste(filenames[i], ".csv", sep="")), skip = 1) %>% 
    remove_empty(which = c("cols", "rows")) %>% 
    clean_names() %>% 
    mutate(date_d_logger = parse_date(date_d_logger))
    rename(transect = transect_d_logger) %>% 
    rename(habitat = local_dlogger) %>% 
    rename(date = date_d_logger) %>% 
    rename(time = capturetime_dlogger) %>% 
    rename(temp_c = temp_f_dlogger) %>% 
    rename(light_intensity_lum_ft2 = intensidade_lum_ft2_dlogger) %>% 
    mutate(temp_c = ((temp_c - 32) * (5/9))) %>% 
    group_by(date) %>% 
    mutate(mean_daily_temp_c = mean(temp_c))
  
  assign(x = paste(filenames[i]), value = csv) 
  
  print((paste("Done with", filenames[i])))

  }

```

# Loop through and visualize temp data
```{r}

temp_plots <- list()

for (i in 1:n_distinct(filenames)) {
  
  data <- get(filenames[i])
  
  p<- ggplot(data = data) +
        geom_line(aes(x=date, y=mean_daily_temp_c)) +
        theme(axis.text.x = element_text(angle = 90)) +
        #geom_vline(xintercept = ) +
        ggtitle(paste(filenames[i]))
  
  temp_plots[[i]] <- p
  
  print(paste("done with", filenames[i]))
  
}


temp_plots[1:length(temp_plots)]
```
# Loop through and visualize light intensity data
```{r}

temp_plots <- list()

for (i in 1:n_distinct(filenames)) {
  
  data <- get(filenames[i])
  
  p<- ggplot(data = data) +
        geom_line(aes(x=date, y=light_intensity_lum_ft2)) +
        theme(axis.text.x = element_text(angle = 90)) +
        #geom_vline(xintercept = ) +
        ggtitle(paste(filenames[i]))
  
  temp_plots[[i]] <- p
  
  print(paste("done with", filenames[i]))
  
}


temp_plots[1:length(temp_plots)]

```
